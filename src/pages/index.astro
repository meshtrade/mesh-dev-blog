---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../consts';
import { getCollection } from 'astro:content';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from 'astro:assets';
import Star from '../components/Star.astro';

const posts = (await getCollection('blog')).sort(
	(a: any, b: any) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
		<style>
			main {
				width: 960px;
			}
			ul {
				display: flex;
				flex-wrap: wrap;
				gap: 2rem;
				list-style-type: none;
				margin: 0;
				padding: 0;
			}
			ul li {
				width: calc(50% - 1rem);
				position: relative;
				overflow: hidden;
  				display: flex;
  				align-items: flex-start;
  				justify-content: center;
			}
			ul li * {
				text-decoration: none;
				transition: 0.2s ease;
				z-index: 1;
			}
			ul li:first-child {
				width: 100%;
				margin-bottom: 1rem;
				text-align: center;
			}
			ul li:first-child img {
				width: 90%;
				margin-top: 20px;
			}
			ul li:first-child .title {
				font-size: 2.369rem;
			}
			ul li img {
				margin-bottom: 1rem;
				border-radius: 12px;
			}
			ul li a {
				display: block;
			}
			.title {
				margin: 0;
				color: rgb(var(--black));
				line-height: 1;
			}
			.date {
				margin: 0;
				color: rgb(var(--gray));
			}
			.background {
				position: absolute;
				width: 100vw;
				height: 100vh;
				z-index: -1;
				background-color: rgb(250 250 250 / var(--tw-bg-opacity));
				background-image: url("/body-bg.svg");
				background-repeat: repeat;
			}
			ul li a:hover h4,
			ul li a:hover .date {
				color: #dc0451d9;
			}
			ul a:hover .cursor {
				width: 40px;
				height: 40px;
			}
			.page-title {
				text-align: center;
				margin: 0.5em 0;
				background: #C500CF;
				background: linear-gradient(to right, #C500CF 0%, #DC0451 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}
			.page-description {
				padding: 0.5em 3em;
				font-size: medium;
			}
			.mesh {
				background: #C500CF;
				background: linear-gradient(to right, #C500CF 0%, #DC0451 100%);
				-webkit-background-clip: text;
				-webkit-text-fill-color: transparent;
			}
			.post-thumbnail img {
				position: relative;
				overflow: hidden;
				border: 2px solid transparent;
			}
			.img-wrapper {
				overflow: hidden;
				border-radius: 12px;	
			}
			.img-wrapper img {
				transform-origin: 65% 75%;
  				transition: transform .25s, filter .25s ease-in;
			}
			.img-wrapper img:hover {
				transform: scale(1.02);
			}

			@media (max-width: 720px) {
				.page-title {
					font-size: xx-large;
				}
				.page-description {
					text-align: center;
					width: 100%;
					padding: 0;
				}
				ul {
					gap: 0.5em;
				}
				ul li {
					width: 100%;
					text-align: center;
				}
				ul li:first-child {
					margin-bottom: 0;
				}
				ul li:first-child .title {
					font-size: 1.563em;
				}
				ul li:first-child img {
					width: 100%;
				}
			}
		</style>
	</head>
	<body>
		<div class="background"/>
		  <Star />
		  
		<Header />
		<main transition:animate="slide">
			<section>
				<h1 transition:name="hero title" class="page-title">Engineering Blog</h1>
				<p transition:name="hero description" class="page-description">
					At <span class="mesh">Mesh.Trade</span>, our engineering culture is driven by a passion for innovation and simplicity. 
					We believe capital markets should be <span class="mesh">accessible</span>, <span class="mesh">transparent</span>, and <span class="mesh">efficient</span>. 
					By leveraging cutting-edge technology, we&apos;ve engineered a platform that removes traditional barriers, 
					simplifies complex processes, and reduces fees, making financial markets easier for everyone to access and use. Here we would
					like to document some of our engineering challenges and insights.
				</p>
				<ul>
					{
						posts.map((post) => (
							<li class="post-thumbnail">
								<a href={`/blog/${post.slug}/`}>
									<div class="img-wrapper">
										<Image transition:name={`${post.data.title} image`} width={720} height={360} src={post.data.heroImage ?? ""} alt="" />
									</div>
									<h4 transition:name={`${post.data.title} title`} class="title">{post.data.title}</h4>
									<p class="date">
										<FormattedDate date={post.data.pubDate} />
									</p>
								</a>
							</li>
						))
					}
				</ul>
			</section>
		</main>
		<Footer />
	</body>	
</html>
